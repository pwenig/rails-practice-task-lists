<h1>My lists</h1>

<% if flash[:notice] %>
  <%= flash[:notice] %>
<% end %>

<% @task_lists.each do |task_list| %>

  <section class="task-list">
    <h1><%= task_list.name %></h1>
    <% if current_user %>
      <%= link_to '+ Add Task', new_task_list_task_path(task_list) %>

      <br>
      <% if task_list.tasks.empty? %>
        <p>Nothing here to see!</p>
      <% else %>
        <%= render partial: 'tasks/tasks', collection: task_list.tasks.sort_by { |task| task.due_date } %>
      <% end %>
      </section>
    <% end %>
<% end %>